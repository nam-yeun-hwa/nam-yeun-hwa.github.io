<!DOCTYPE html><html lang="en" class=""><head><meta charSet="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/5048045ff4a95083.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/0c496b0e03d530ba.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/175d6c648827cdb6.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-5f1f64e428887f2c.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-0e492acdb34e0e7d.js" async="" crossorigin=""></script><script src="/_next/static/chunks/938-073485517c55f951.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-be60a2300d8c0041.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-8b90be581650ff9d.js" async=""></script><script src="/_next/static/chunks/399-caf055eb211349e2.js" async=""></script><script src="/_next/static/chunks/app/(layoutCase)/tags/%5Btagname%5D/%5Bpostid%5D/page-476f642580858048.js" async=""></script><script src="/_next/static/chunks/262-683004883e01034d.js" async=""></script><script src="/_next/static/chunks/35-49bea45569ed55c7.js" async=""></script><script src="/_next/static/chunks/app/(layoutCase)/layout-e9c1ba8c7c5d810f.js" async=""></script><title>be come 💡</title><meta name="description" content="App for an Ant Who Wants to Become a Bejjangyi"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR&amp;display=swap" as="style"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><aside id="sidebar" class="sidemenu_sidebar__EmvJl"><header class="sidemenu_profile_wrapper__R57aU"><div class="sidemenu_profile__R1Mv0"><a href="/posts"><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="프로필이미지" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:50%;width:100%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/profile1.jpg?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/profile1.jpg?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/profile1.jpg?w=256&amp;q=75"/></div></a></div><h1 class="sidemenu_blog_name_txt__AfWhD">my blog</h1><p class="sidemenu_site_subtitle__eLcN7">You can only earn as much as an ant does by working like an ant.</p></header><nav><ul class="sidemenu_nav__6C5tz"><li class="sidemenu_nav_item__tt_B1"><a class="sidemenu_nav_link__WTCmf" href="/posts"><i class="fa-fw fas fa-home sidemenu_ico__6idJs"></i><span class="sidemenu_nav_txt__mSemS">HOME</span></a></li><li class="sidemenu_nav_item__tt_B1"><a class="sidemenu_nav_link__WTCmf" href="/categories"><i class="fa-fw fas fa-stream sidemenu_ico__6idJs"></i><span class="sidemenu_nav_txt__mSemS">CATEGORIES</span></a></li><li class="sidemenu_nav_item__tt_B1 sidemenu_active__fflT6"><a class="sidemenu_nav_link__WTCmf" href="/tags"><i class="fa-fw fas fa-tags sidemenu_ico__6idJs"></i><span class="sidemenu_nav_txt__mSemS">TAGS</span></a></li><li class="sidemenu_nav_item__tt_B1"><a class="sidemenu_nav_link__WTCmf" href="/archives"><i class="fa-fw fas fa-archive sidemenu_ico__6idJs"></i><span class="sidemenu_nav_txt__mSemS">ARCHIVES</span></a></li></ul></nav><div class="sidebar-bottom"></div></aside><div class="layout_main_wrapper__1M1Uy"><div class="contents_container__AfHAx"><header class="breadCrumb_topbar_wrapper__dGN_V"><div class="breadCrumb_top_bar__b_rV9"><nav class="breadCrumb_breadcrumb__l7WLX"><span><a class="breadCrumb_topbar_txt__ExrWf" href="/">Home</a><a class="breadCrumb_topbar_txt__ExrWf" href="">[TECH-QA] 애니메이션 분석 (Reflow와 Repaint 이론)</a></span></nav><search class="searchBar_search__Ftlhc"><i class="fas fa-search fa-fw searchBar_search_ico__STStc"></i><input id="search" class="searchBar_search_input__1XpQF" placeholder="Search..." autoComplete="off" value=""/></search></div><div class="breadCrumb_mobile_topbar__N1Azi"><button class="breadCrumb_sidebar_trigger__APgD8"><i class="fas fa-bars fa-fw breadCrumb_sidebar_trigger_ico__K9DdV"></i></button><div class="breadCrumb_mobile_topbar_title__oCVBS">be come 💡</div><button class="breadCrumb_search_trigger__PxWyf"><i class="fas fa-search fa-fw breadCrumb_search_trigger_ico__yqqpz"></i></button></div></header><div class="contents_contents__Hpf57"><main class="contents_inner_content__wyt37"><article><header><h1 class="postUserInfo_h1__uhAqy">[TECH-QA] 애니메이션 분석 (Reflow와 Repaint 이론)</h1></header></article><div class="postUserInfo_post_meta__ABvuC"><span>Posted<!-- --> <time class="postUserInfo_time__2exyR">3 months<!-- --> </time></span><span class="postUserInfo_update__f345P">Updated<!-- --> <time class="postUserInfo_time__2exyR">3 months</time></span></div><div><span class="postUserInfo_post_meta__ABvuC">By<!-- --> <em><a class="postUserInfo_author__fVGYM" href="https://nam-yeun-hwa.github.io/">베짱이가 되고싶은 개미。</a></em></span></div><div class="postDetail_content__OTeO2">웹 애니메이션 이미지를 보고 전체적인 흐름에 따라 리플로우 리페인트 쟁크현상 병목현상등을 알아보고 이해하는 시간을 가지려고 합니다.</div><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="이미지최적화 샘플1" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:12px;width:55%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample1.jpg?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/ImageOptimizationSample1.jpg?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample1.jpg?w=256&amp;q=75"/></div><div class="postDetail_content__OTeO2">그래프를 클릭하거나 페이지에 들어서면 애니메이션이 실행되는 페이지이다.</div><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="이미지최적화 샘플2" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:12px;width:80%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample2.jpg?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/ImageOptimizationSample2.jpg?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample2.jpg?w=256&amp;q=75"/></div><div class="postDetail_content__OTeO2">위의 이미지에서 Timings는 그래프를 클릭 할때마다 리액트 함수가 실행되는 타이밍을 보여주고 있으며 그 타이밍에 맞춰 브라우저에 화면을 그리는 작업을 수행하는 내용을 아래 에서 확인 할 수 있다.</div><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="이미지최적화 샘플3" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:12px;width:80%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample3.jpg?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/ImageOptimizationSample3.jpg?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample3.jpg?w=256&amp;q=75"/></div><div class="postDetail_content__OTeO2">Timings 아래 부분을 확대해 보았다. 애니메이션을 변경될때마다 브라우저에 렌더링 하는 과정을 반복하는 것을 확인 할 수 있다.</div><ul class="liststyle_ul__uFdBS"><li class="liststyle_dot__SMzS4">➀ 스타일을 다시 계산하고 (dom tree, cssom tree를 생성하고 렌더 트리를 새로 생성 과정)</li><li class="liststyle_dot__SMzS4">➁ 레이아웃 과정</li><li class="liststyle_dot__SMzS4">③ 페인트 과정</li><li class="liststyle_dot__SMzS4">④ 레이어 합성 과정</li></ul><div class="postDetail_content__OTeO2">5번의 경우 점선이 그어져 있는데 이 점선은 브라우저 화면에 렌더링 화면이 노출되어야 하는 시점이다. 하지만 마지막 레이어 합성과정이 완료 되지 않은 상태로 보여 진다.

위와 같은 현상이 일어나면 프레임이 드랍되거나 쟁크 현상이 일어나 애니메이션이 매끄럽지 않다.

이럴때는 reflow을 일으키는 속성들 사용 보다는 repaint를 일으키는 속성이나 layout, paint 단계를 건너띌수 있는 transform 속성을 사용 하는 것이 좋다.
</div><h2 class="heading_h2__fsXMw" style="font-weight:NORMAL">Reflow, Repaint를 피하여 CSS 애니메이션 최적화하기</h2><div class="LanguageConsole_console_container__AqYGR"><div class="LanguageConsole_console_header__inJS4"><span class="LanguageConsole_title__QSrQq" data-label-text="Javascript"><i class="fas fa-code fa-fw small LanguageConsole_ico_title__oetQW"></i></span><button class="LanguageConsole_copy__l7rff"><i class="far fa-clipboard LanguageConsole_ico_clipboard__tvVJz"></i></button></div><div class="LanguageConsole_console_content__O4Cw8"><pre class="LanguageConsole_console_code__9O_nt">.style_ani{
    position: absolute;
    left: 0;
    top: 0;
    width: ${({ width }) =&gt; width}%;
    transition: width 1.5s ease;
    height: 100%;
    background: ${({ isSelected }) =&gt; isSelected ? &#x27;rgba(126, 198, 81, 0.7)&#x27; : &#x27;rgb(198, 198, 198)&#x27;};
    z-index: 1;}</pre></div></div><div class="postDetail_content__OTeO2">위 css는 width값을 이용하여 애니메이션을 적용하는 리액트의 스타일 컴포넌트이다. 이 내용을 scaleX 속성을 이용하여 변경하여 Reflow, Repaint 피하고 GPU 도움 받아 렌더링 하도록 변경한다.</div><div class="LanguageConsole_console_container__AqYGR"><div class="LanguageConsole_console_header__inJS4"><span class="LanguageConsole_title__QSrQq" data-label-text="Javascript"><i class="fas fa-code fa-fw small LanguageConsole_ico_title__oetQW"></i></span><button class="LanguageConsole_copy__l7rff"><i class="far fa-clipboard LanguageConsole_ico_clipboard__tvVJz"></i></button></div><div class="LanguageConsole_console_content__O4Cw8"><pre class="LanguageConsole_console_code__9O_nt">.style_ani{
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    transform: scaleX(${props =&gt; props.width / 100});
    transform-origin: center left;
    transition: width 1.5s ease;
    height: 100%;
    background: ${({ isSelected }) =&gt; isSelected ? &#x27;rgba(126, 198, 81, 0.7)&#x27; : &#x27;rgb(198, 198, 198)&#x27;};
    z-index: 1;</pre></div></div><div class="postDetail_content__OTeO2">scaleX의 축은 가운데를 기준으로 스케일이 변경되기 때문에 transform-origin 속성을 추가하여 세로는 가운데로 가로는 왼쪽으로 스케일이 변경 되도록 수정한다.

또 애니메이션이 transform에 적용되도록 transition 속성의 값을 transform으로 변경하여 준다.</div><h2 class="heading_h2__fsXMw" style="font-weight:NORMAL">애니메이션 Reflow에서 GPU사용으로 변경 후</h2><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="이미지최적화 샘플4" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:12px;width:80%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample4.png?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/ImageOptimizationSample4.png?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample4.png?w=256&amp;q=75"/></div><h2 class="heading_h2__fsXMw" style="font-weight:NORMAL">FPS</h2><div class="postDetail_content__OTeO2">웹 브라우저는 호출 스택에 실행 컨텍스트가 존재하는 동안, 즉 실행 중인 함수가 존재하는 동안에는 먹통이 되어 버립니다. 브라우저는 60 프레임으로 애니메이션을 렌더링 하고 있는데 그래프의 애니메이션이 뚝뚝 끊기는 현상은 애니메이션을 렌더링 하는데 60 프레임을 넘어가 프레임 드롭 현상이 나타나는 것입니다. 이는 사용자 경험에 악영향을 미칠 수 있습니다.

따라서, 브라우저에서 동작하는 JavaScript 코드, 특히 사용자와의 상호작용을 위한 코드를 작성할 때에는 코드의 실행 시간이 얼마나 될지를 항상 염두에 두어야 합니다.</div><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="이미지최적화 샘플5" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:12px;width:80%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample5.jpg?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/ImageOptimizationSample5.jpg?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample5.jpg?w=256&amp;q=75"/></div><h2 class="heading_h2__fsXMw" style="font-weight:NORMAL">Reflow 영역의 그래프</h2><div class="postDetail_content__OTeO2">Reflow가 일어난 영역에서는 보라색과 초록색 등 메인 쓰레드의 역할이 매우 활발한 것을 볼 수 있다.</div><div class="imageLoader_imgloaderContainer__d3Tsu"><img alt="이미지최적화 샘플6" loading="lazy" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent;border-radius:12px;width:80%;height:auto" srcSet="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample6.jpg?w=128&amp;q=75 1x, https://nam-yeun-hwa.github.io/image/ImageOptimizationSample6.jpg?w=256&amp;q=75 2x" src="https://nam-yeun-hwa.github.io/image/ImageOptimizationSample6.jpg?w=256&amp;q=75"/></div><div class="postDetail_content__OTeO2">출처 : 
https://www.inflearn.com/course/lecture?courseSlug=%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%A6%AC%EC%95%A1%ED%8A%B8-1&amp;unitId=48065&amp;tab=curriculum</div><div class="row"><nav class="postNavigation_post_navigation__Zbcpm"><a class="postNavigation_post_navgation_common__q8_Hl postNavigation_post_navigation_pre__SPHh_" aria-label="Older" href="/posts/69"><p class="postNavigation_post_navigation_text__3cjma">[TECH-QA] 이미지 Preloading, 아마지 caching</p></a><a class="postNavigation_post_navgation_common__q8_Hl postNavigation_post_navigation_next__yVEzg" aria-label="Newer" href="/posts/67"><p class="postNavigation_post_navigation_text__3cjma">[TECH-QA] 리플로우(Reflow)와 리페인트(Repaint)는 브라우저의 렌더링 과정</p></a></nav></div><div class="footer_footer_container__MsSvO"><footer class="footer_footer__AwYty"><p class="footer_copylight___J5l0">© 2024 <!-- -->베짱이가 되고싶은 개미。<!-- --> Some rights reserved.</p><p class="footer_theme__bwXbg">portfolio v1.0.0-alpha.3</p></footer></div></main><aside class="panel_panel_wrapper__bjPKT"><div class="panel_access__NiFhF"><section class="panel_access_lastmod__v6pgX"><h2 class="panel_panel_heading__n9W6w">Recently Updated</h2><ul class="panel_panel_recently__U0_Zp"><li class="panel_text_truncate__SFfHf"><a href="/posts/84">[TECH-QA] Lodash compact 함수</a></li><li class="panel_text_truncate__SFfHf"><a href="/posts/83">[TECH-QA] ES6+에서 객체 디스트럭처링(...rest)</a></li><li class="panel_text_truncate__SFfHf"><a href="/posts/82">[TECH-QA] class-variance-authority 라이브러리</a></li><li class="panel_text_truncate__SFfHf"><a href="/posts/81">[TECH-QA] React에서 SVG 아이콘 다루기: 실용적인 예제와 팁</a></li><li class="panel_text_truncate__SFfHf"><a href="/posts/79">[TECH-QA] TypeScript로 깔끔한 쿼리 문자열 만들기: Record&lt;string, never&gt; 활용법</a></li></ul></section><section class="panel_panel_tag_contain__h_Bwi"><h2 class="panel_panel_heading__n9W6w">Trending Tags</h2><div class="panel_panel_tag__eNz5c"><a class="panel_tag__3AiMO" href="/tags/TECH-QA">TECH-QA</a><a class="panel_tag__3AiMO" href="/tags/tailwind">tailwind</a><a class="panel_tag__3AiMO" href="/tags/style">style</a><a class="panel_tag__3AiMO" href="/tags/CVA">CVA</a><a class="panel_tag__3AiMO" href="/tags/SVG">SVG</a><a class="panel_tag__3AiMO" href="/tags/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80">브라우저</a><a class="panel_tag__3AiMO" href="/tags/%EC%9B%B9%EC%84%B1%EB%8A%A5%EC%B5%9C%EC%A0%81%ED%99%94">웹성능최적화</a><a class="panel_tag__3AiMO" href="/tags/TypeScript">TypeScript</a><a class="panel_tag__3AiMO" href="/tags/NextAuth">NextAuth</a><a class="panel_tag__3AiMO" href="/tags/React">React</a><a class="panel_tag__3AiMO" href="/tags/%EB%A6%AC%EC%95%A1%ED%8A%B8">리액트</a><a class="panel_tag__3AiMO" href="/tags/%ED%8C%A9%ED%86%A0%EB%A6%AC%ED%8C%A8%ED%84%B4">팩토리패턴</a><a class="panel_tag__3AiMO" href="/tags/Reflow">Reflow</a><a class="panel_tag__3AiMO" href="/tags/Repaint">Repaint</a><a class="panel_tag__3AiMO" href="/tags/%EB%A6%AC%ED%94%8C%EB%A1%9C%EC%9A%B0">리플로우</a><a class="panel_tag__3AiMO" href="/tags/%EB%A6%AC%ED%8E%98%EC%9D%B8%ED%8A%B8">리페인트</a><a class="panel_tag__3AiMO" href="/tags/%EC%9B%B9%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94">웹성능 최적화</a><a class="panel_tag__3AiMO" href="/tags/react">react</a><a class="panel_tag__3AiMO" href="/tags/XSS">XSS</a><a class="panel_tag__3AiMO" href="/tags/JavaScript">JavaScript</a><a class="panel_tag__3AiMO" href="/tags/CSRF">CSRF</a><a class="panel_tag__3AiMO" href="/tags/%EB%A6%AC%EB%A0%8C%EB%8D%94%EB%A7%81">리렌더링</a><a class="panel_tag__3AiMO" href="/tags/Prototype">Prototype</a><a class="panel_tag__3AiMO" href="/tags/JWT">JWT</a><a class="panel_tag__3AiMO" href="/tags/English">English</a><a class="panel_tag__3AiMO" href="/tags/midjourney">midjourney</a><a class="panel_tag__3AiMO" href="/tags/%EC%8A%A4%ED%82%A4%EB%84%88%EC%9D%98%20%EC%8B%AC%EB%A6%AC%EC%83%81%EC%9E%90%20%EC%97%B4%EA%B8%B0">스키너의 심리상자 열기</a><a class="panel_tag__3AiMO" href="/tags/%EB%8F%85%EC%84%9C">독서</a><a class="panel_tag__3AiMO" href="/tags/next">next</a><a class="panel_tag__3AiMO" href="/tags/%EC%A7%80%EC%97%B0%EB%A1%9C%EB%94%A9">지연로딩</a><a class="panel_tag__3AiMO" href="/tags/Lazy-loading">Lazy-loading</a><a class="panel_tag__3AiMO" href="/tags/CSS">CSS</a><a class="panel_tag__3AiMO" href="/tags/Tailwind">Tailwind</a><a class="panel_tag__3AiMO" href="/tags/mysql">mysql</a><a class="panel_tag__3AiMO" href="/tags/database">database</a><a class="panel_tag__3AiMO" href="/tags/TDD">TDD</a><a class="panel_tag__3AiMO" href="/tags/%EC%BD%9C%EB%B0%B1%ED%95%A8%EC%88%98">콜백함수</a><a class="panel_tag__3AiMO" href="/tags/browser">browser</a><a class="panel_tag__3AiMO" href="/tags/HTTP-Protocol">HTTP-Protocol</a><a class="panel_tag__3AiMO" href="/tags/git">git</a><a class="panel_tag__3AiMO" href="/tags/FrontEnd">FrontEnd</a><a class="panel_tag__3AiMO" href="/tags/Vue">Vue</a></div></section></div></aside></div></div></div><script src="/_next/static/chunks/webpack-5f1f64e428887f2c.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/5048045ff4a95083.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/0c496b0e03d530ba.css\",\"style\",{\"crossOrigin\":\"\"}]\n4:HL[\"/_next/static/css/175d6c648827cdb6.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"5:I[7690,[],\"\"]\n7:I[5250,[\"250\",\"static/chunks/250-8b90be581650ff9d.js\",\"399\",\"static/chunks/399-caf055eb211349e2.js\",\"216\",\"static/chunks/app/(layoutCase)/tags/%5Btagname%5D/%5Bpostid%5D/page-476f642580858048.js\"],\"\"]\n8:I[9006,[\"250\",\"static/chunks/250-8b90be581650ff9d.js\",\"399\",\"static/chunks/399-caf055eb211349e2.js\",\"216\",\"static/chunks/app/(layoutCase)/tags/%5Btagname%5D/%5Bpostid%5D/page-476f642580858048.js\"],\"\"]\n9:I[8843,[\"250\",\"static/chunks/250-8b90be581650ff9d.js\",\"399\",\"static/chunks/399-caf055eb2"])</script><script>self.__next_f.push([1,"11349e2.js\",\"216\",\"static/chunks/app/(layoutCase)/tags/%5Btagname%5D/%5Bpostid%5D/page-476f642580858048.js\"],\"\"]\na:I[777,[\"250\",\"static/chunks/250-8b90be581650ff9d.js\",\"399\",\"static/chunks/399-caf055eb211349e2.js\",\"216\",\"static/chunks/app/(layoutCase)/tags/%5Btagname%5D/%5Bpostid%5D/page-476f642580858048.js\"],\"\"]\nb:I[5613,[],\"\"]\ne:I[1778,[],\"\"]\n12:I[8765,[\"250\",\"static/chunks/250-8b90be581650ff9d.js\",\"399\",\"static/chunks/399-caf055eb211349e2.js\",\"262\",\"static/chunks/262-683004883e01034d.js\",\"35\",\"static/chu"])</script><script>self.__next_f.push([1,"nks/35-49bea45569ed55c7.js\",\"464\",\"static/chunks/app/(layoutCase)/layout-e9c1ba8c7c5d810f.js\"],\"\"]\n19:I[8955,[],\"\"]\nc:[\"tagname\",\"%ED%8C%A9%ED%86%A0%EB%A6%AC%ED%8C%A8%ED%84%B4\",\"d\"]\nd:[\"postid\",\"68\",\"d\"]\nf:\"$L10\"\n13:[]\n14:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\n15:{\"display\":\"inline-block\",\"margin\":\"0 20px 0"])</script><script>self.__next_f.push([1," 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\n16:{\"display\":\"inline-block\"}\n17:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5048045ff4a95083.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"nkfNnfULw2CnwAoJ46PQL\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/tags/%ED%8C%A9%ED%86%A0%EB%A6%AC%ED%8C%A8%ED%84%B4/68\",\"initialTree\":[\"\",{\"children\":[\"(layoutCase)\",{\"children\":[\"tags\",{\"children\":[[\"tagname\",\"%ED%8C%A9%ED%86%A0%EB%A6%AC%ED%8C%A8%ED%84%B4\",\"d\"],{\"children\":[[\"postid\",\"68\",\"d\"],{\"children\":[\"__PAGE__?{\\\"tagname\\\":\\\"팩토리패턴\\\",\\\"postid\\\":\\\"68\\\"}\",{}]}]}]}],\"search\":[\"__DEFAULT__\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"(layoutCase)\",{\"children\":[\"tags\",{\"children\":[[\"tagname\",\"%ED%8C%A9%ED%86%A0%EB%A6%AC%ED%8C%A8%ED%84%B4\",\"d\"],{\"children\":[[\"postid\",\"68\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L6\",[[[\"$\",\"article\",null,{\"className\":\"$undefined\",\"children\":[\"$\",\"header\",null,{\"children\":[\"$\",\"h1\",null,{\"className\":\"postUserInfo_h1__uhAqy\",\"children\":\"[TECH-QA] 애니메이션 분석 (Reflow와 Repaint 이론)\"}]}]}],[\"$\",\"div\",null,{\"className\":\"postUserInfo_post_meta__ABvuC\",\"children\":[[\"$\",\"span\",null,{\"children\":[\"Posted\",\" \",[\"$\",\"time\",null,{\"className\":\"postUserInfo_time__2exyR\",\"children\":[\"3 months\",\" \"]}]]}],[\"$\",\"span\",null,{\"className\":\"postUserInfo_update__f345P\",\"children\":[\"Updated\",\" \",[\"$\",\"time\",null,{\"className\":\"postUserInfo_time__2exyR\",\"children\":\"3 months\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"span\",null,{\"className\":\"postUserInfo_post_meta__ABvuC\",\"children\":[\"By\",\" \",[\"$\",\"em\",null,{\"children\":[\"$\",\"$L7\",null,{\"href\":\"https://nam-yeun-hwa.github.io/\",\"className\":\"postUserInfo_author__fVGYM\",\"children\":\"베짱이가 되고싶은 개미。\"}]}]]}]}]],[[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"웹 애니메이션 이미지를 보고 전체적인 흐름에 따라 리플로우 리페인트 쟁크현상 병목현상등을 알아보고 이해하는 시간을 가지려고 합니다.\"}}],[\"$\",\"$L8\",null,{\"imgPath\":\"ImageOptimizationSample1.jpg\",\"alt\":\"이미지최적화 샘플1\",\"width\":\"55%\",\"round\":\"12px\"}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"그래프를 클릭하거나 페이지에 들어서면 애니메이션이 실행되는 페이지이다.\"}}],[\"$\",\"$L8\",null,{\"imgPath\":\"ImageOptimizationSample2.jpg\",\"alt\":\"이미지최적화 샘플2\",\"width\":\"80%\",\"round\":\"12px\"}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"위의 이미지에서 Timings는 그래프를 클릭 할때마다 리액트 함수가 실행되는 타이밍을 보여주고 있으며 그 타이밍에 맞춰 브라우저에 화면을 그리는 작업을 수행하는 내용을 아래 에서 확인 할 수 있다.\"}}],[\"$\",\"$L8\",null,{\"imgPath\":\"ImageOptimizationSample3.jpg\",\"alt\":\"이미지최적화 샘플3\",\"width\":\"80%\",\"round\":\"12px\"}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"Timings 아래 부분을 확대해 보았다. 애니메이션을 변경될때마다 브라우저에 렌더링 하는 과정을 반복하는 것을 확인 할 수 있다.\"}}],[\"$\",\"ul\",null,{\"className\":\"liststyle_ul__uFdBS\",\"children\":[[\"$\",\"li\",\"0\",{\"className\":\"liststyle_dot__SMzS4\",\"dangerouslySetInnerHTML\":{\"__html\":\"➀ 스타일을 다시 계산하고 (dom tree, cssom tree를 생성하고 렌더 트리를 새로 생성 과정)\"}}],[\"$\",\"li\",\"1\",{\"className\":\"liststyle_dot__SMzS4\",\"dangerouslySetInnerHTML\":{\"__html\":\"➁ 레이아웃 과정\"}}],[\"$\",\"li\",\"2\",{\"className\":\"liststyle_dot__SMzS4\",\"dangerouslySetInnerHTML\":{\"__html\":\"③ 페인트 과정\"}}],[\"$\",\"li\",\"3\",{\"className\":\"liststyle_dot__SMzS4\",\"dangerouslySetInnerHTML\":{\"__html\":\"④ 레이어 합성 과정\"}}]]}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"5번의 경우 점선이 그어져 있는데 이 점선은 브라우저 화면에 렌더링 화면이 노출되어야 하는 시점이다. 하지만 마지막 레이어 합성과정이 완료 되지 않은 상태로 보여 진다.\\n\\n위와 같은 현상이 일어나면 프레임이 드랍되거나 쟁크 현상이 일어나 애니메이션이 매끄럽지 않다.\\n\\n이럴때는 reflow을 일으키는 속성들 사용 보다는 repaint를 일으키는 속성이나 layout, paint 단계를 건너띌수 있는 transform 속성을 사용 하는 것이 좋다.\\n\"}}],[false,[\"$\",\"h2\",null,{\"className\":\"heading_h2__fsXMw\",\"style\":{\"fontWeight\":\"NORMAL\"},\"children\":\"Reflow, Repaint를 피하여 CSS 애니메이션 최적화하기\"}],false,false],[\"$\",\"$L9\",null,{\"code\":\".style_ani{\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: ${({ width }) =\u003e width}%;\\n    transition: width 1.5s ease;\\n    height: 100%;\\n    background: ${({ isSelected }) =\u003e isSelected ? 'rgba(126, 198, 81, 0.7)' : 'rgb(198, 198, 198)'};\\n    z-index: 1;}\",\"children\":\"$undefined\"}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"위 css는 width값을 이용하여 애니메이션을 적용하는 리액트의 스타일 컴포넌트이다. 이 내용을 scaleX 속성을 이용하여 변경하여 Reflow, Repaint 피하고 GPU 도움 받아 렌더링 하도록 변경한다.\"}}],[\"$\",\"$L9\",null,{\"code\":\".style_ani{\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    transform: scaleX(${props =\u003e props.width / 100});\\n    transform-origin: center left;\\n    transition: width 1.5s ease;\\n    height: 100%;\\n    background: ${({ isSelected }) =\u003e isSelected ? 'rgba(126, 198, 81, 0.7)' : 'rgb(198, 198, 198)'};\\n    z-index: 1;\",\"children\":\"$undefined\"}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"scaleX의 축은 가운데를 기준으로 스케일이 변경되기 때문에 transform-origin 속성을 추가하여 세로는 가운데로 가로는 왼쪽으로 스케일이 변경 되도록 수정한다.\\n\\n또 애니메이션이 transform에 적용되도록 transition 속성의 값을 transform으로 변경하여 준다.\"}}],[false,[\"$\",\"h2\",null,{\"className\":\"heading_h2__fsXMw\",\"style\":{\"fontWeight\":\"NORMAL\"},\"children\":\"애니메이션 Reflow에서 GPU사용으로 변경 후\"}],false,false],[\"$\",\"$L8\",null,{\"imgPath\":\"ImageOptimizationSample4.png\",\"alt\":\"이미지최적화 샘플4\",\"width\":\"80%\",\"round\":\"12px\"}],[false,[\"$\",\"h2\",null,{\"className\":\"heading_h2__fsXMw\",\"style\":{\"fontWeight\":\"NORMAL\"},\"children\":\"FPS\"}],false,false],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"웹 브라우저는 호출 스택에 실행 컨텍스트가 존재하는 동안, 즉 실행 중인 함수가 존재하는 동안에는 먹통이 되어 버립니다. 브라우저는 60 프레임으로 애니메이션을 렌더링 하고 있는데 그래프의 애니메이션이 뚝뚝 끊기는 현상은 애니메이션을 렌더링 하는데 60 프레임을 넘어가 프레임 드롭 현상이 나타나는 것입니다. 이는 사용자 경험에 악영향을 미칠 수 있습니다.\\n\\n따라서, 브라우저에서 동작하는 JavaScript 코드, 특히 사용자와의 상호작용을 위한 코드를 작성할 때에는 코드의 실행 시간이 얼마나 될지를 항상 염두에 두어야 합니다.\"}}],[\"$\",\"$L8\",null,{\"imgPath\":\"ImageOptimizationSample5.jpg\",\"alt\":\"이미지최적화 샘플5\",\"width\":\"80%\",\"round\":\"12px\"}],[false,[\"$\",\"h2\",null,{\"className\":\"heading_h2__fsXMw\",\"style\":{\"fontWeight\":\"NORMAL\"},\"children\":\"Reflow 영역의 그래프\"}],false,false],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"Reflow가 일어난 영역에서는 보라색과 초록색 등 메인 쓰레드의 역할이 매우 활발한 것을 볼 수 있다.\"}}],[\"$\",\"$L8\",null,{\"imgPath\":\"ImageOptimizationSample6.jpg\",\"alt\":\"이미지최적화 샘플6\",\"width\":\"80%\",\"round\":\"12px\"}],[\"$\",\"div\",null,{\"className\":\"postDetail_content__OTeO2\",\"dangerouslySetInnerHTML\":{\"__html\":\"출처 : \\nhttps://www.inflearn.com/course/lecture?courseSlug=%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%A6%AC%EC%95%A1%ED%8A%B8-1\u0026amp;unitId=48065\u0026amp;tab=curriculum\"}}]],[\"$\",\"$La\",null,{\"postid\":68,\"prePostTitle\":{\"id\":69,\"title\":\"[TECH-QA] 이미지 Preloading, 아마지 caching\",\"date\":\"2025-05-03 14:20:05\",\"folder\":\"Javascript\",\"tag\":[\"웹성능최적화\",\"TECH-QA\"],\"preview\":\"화면에 모든 리소스들이 마운트 되었을때 자바스크립트의 new Image()를 사용하여 이미지를 미리 로드하여 캐싱하여 준다.\",\"post\":[{\"type\":\"normal\",\"value\":\"화면에 모든 리소스들이 마운트 되었을때 자바스크립트의 new Image()를 사용하여 이미지를 미리 로드하여 캐싱하여 준다.\"},{\"type\":\"code\",\"value\":\"useEffect(()=\u003e {\\n  const img = new Image();\\n  img.src = '이미지주소';\\n},[])\"},{\"type\":\"Heading\",\"headingType\":\"h2\",\"value\":\"이미지에 cache-control 속성 확인\"},{\"type\":\"ImageLoader\",\"value\":\"\",\"imageloader\":{\"imgPath\":\"preloading1.jpg\",\"alt\":\"브라우저 cache-control 이미지\",\"width\":\"80%\",\"round\":\"12px\"}},{\"type\":\"Heading\",\"headingType\":\"h2\",\"value\":\"캐싱 상태를 네트워크 패널에서 확인\"},{\"type\":\"ImageLoader\",\"value\":\"\",\"imageloader\":{\"imgPath\":\"preloading2.jpg\",\"alt\":\"브라우저 cache-control 상태\",\"width\":\"80%\",\"round\":\"12px\"}},{\"type\":\"normal\",\"value\":\"처음 이미지를 한번 new Image()로 로딩하고 이미지의 cache-control 상태에 따라 다음번 이미지를 불러올때는 이미지가 캐싱되어 로딩하는 깜빡임 없이 바로 화면에 뜨는 것을 확인 할 수 있다.\\n\"},{\"type\":\"Heading\",\"headingType\":\"h3\",\"value\":\"(참고)브라우저 캐시 비우기 및 강력 새로고침 활용하기\"},{\"type\":\"ImageLoader\",\"value\":\"\",\"imageloader\":{\"imgPath\":\"preloading3.jpg\",\"alt\":\"브라우저 캐시 비우기 및 강력 새로고침 이미지\",\"width\":\"80%\",\"round\":\"12px\"}},{\"type\":\"normal\",\"value\":\"출처\\nhttps://www.inflearn.com/course/lecture?courseSlug=%EC%9B%B9-%EC%84%B1%EB%8A%A5-%EC%B5%9C%EC%A0%81%ED%99%94-%EB%A6%AC%EC%95%A1%ED%8A%B8-1\u0026unitId=48067\u0026tab=curriculum\"}]},\"nextPostTile\":{\"id\":67,\"title\":\"[TECH-QA] 리플로우(Reflow)와 리페인트(Repaint)는 브라우저의 렌더링 과정\",\"date\":\"2025-04-17 14:07:33\",\"folder\":\"Javascript\",\"tag\":[\"브라우저\",\"TECH-QA\",\"Reflow\",\"Repaint\",\"리플로우\",\"리페인트\"],\"preview\":\"리플로우(Reflow)와 리페인트(Repaint)는 브라우저의 렌더링 과정에서 발생하는 두 가지 중요한 단계로, 웹 페이지의 시각적 업데이트와 관련이 있습니다. 이들은 DOM이나 CSS의 변경으로 인해 요소의 레이아웃이나 스타일이 수정될 때 브라우저가 화면을 다시 그리는 과정에서 발생합니다.\",\"post\":[{\"type\":\"normal\",\"value\":\"리플로우(Reflow)와 리페인트(Repaint)는 브라우저의 렌더링 과정에서 발생하는 두 가지 중요한 단계로, 웹 페이지의 시각적 업데이트와 관련이 있습니다. 이들은 \u003cu\u003eDOM이나 CSS의 변경으로 인해 요소의 레이아웃이나 스타일이 수정될 때 브라우저가 화면을 다시 그리는 과정\u003c/u\u003e에서 발생합니다. 먼저 브라우저의 렌더링 과정을 설명하겠습니다. 브라우저 렌더링은 웹 페이지를 화면에 표시하기 위해 여러 단계를 거칩니다. 아래는 주요 단계를 간단히 설명한 내용입니다.\"},{\"type\":\"Heading\",\"headingType\":\"h2\",\"value\":\"브라우저 렌더링 과정\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"DOM 및 CSSOM 생성\"},{\"type\":\"stringlist\",\"value\":\"HTML을 파싱하여 DOM(Document Object Model) 트리를 생성합니다.\\nCSS를 파싱하여 CSSOM(CSS Object Model) 트리를 생성합니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"렌더 트리(Render Tree) 생성\"},{\"type\":\"stringlist\",\"value\":\"DOM과 CSSOM을 결합하여 실제 화면에 표시할 요소들로 구성된 렌더 트리를 만듭니다. 표시되지 않는 요소(예: display: none)는 포함되지 않습니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"레이아웃(Layout, Reflow)\"},{\"type\":\"stringlist\",\"value\":\"렌더 트리의 각 요소의 위치와 크기를 계산합니다. 이 과정에서 뷰포트 크기, 요소의 스타일 등이 반영됩니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"페인트(Paint, Repaint)\"},{\"type\":\"normal\",\"value\":\"계산된 렌더 트리를 기반으로 픽셀 단위로 화면에 그리는 과정을 수행합니다. 색상, 이미지, 텍스트 등이 포함됩니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"컴포지팅(Compositing)\"},{\"type\":\"normal\",\"value\":\"페인트된 레이어를 합성하여 최종 화면을 렌더링합니다. GPU를 활용하여 레이어 이동, 변형(예: transform: translateX(100px)) 등을 효율적으로 처리합니다.\"},{\"type\":\"Heading\",\"headingType\":\"h2\",\"value\":\"리플로우(Reflow)란?\"},{\"type\":\"normal\",\"value\":\"리플로우는 브라우저가 요소의 \u003cb\u003e레이아웃(크기, 위치 등)\u003c/b\u003e을 다시 계산하는 과정입니다. 이는 렌더 트리의 구조나 요소의 기하학적 속성(예: 너비, 높이, 위치)이 변경될 때 발생합니다. 리플로우는 레이아웃 단계에서 수행되며, 변경된 요소뿐만 아니라 그에 영향을 받는 다른 요소(예: 부모, 자식, 형제 요소)의 레이아웃도 재계산할 수 있습니다.\"},{\"type\":\"Heading\",\"headingType\":\"h3\",\"value\":\"리플로우의 비용\"},{\"type\":\"normal\",\"value\":\"리플로우는 계산량이 많아 성능에 큰 영향을 미칩니다. 특히, 변경된 요소가 다른 요소(예: 부모나 자식)에 영향을 미치면 전체 렌더 트리 또는 큰 부분을 재계산해야 할 수 있습니다.\\n페이지가 복잡하거나 요소가 많을수록 리플로우 비용이 증가합니다.\"},{\"type\":\"stringlist\",\"value\":\"기하학적 속성 변경: width, height, margin, padding, border, top, left, position 등.\\n박스 모델 관련 속성 변경: box-sizing, display (예: block → none).\"},{\"type\":\"Heading\",\"headingType\":\"h2\",\"value\":\"리페인트(Repaint)란?\"},{\"type\":\"normal\",\"value\":\"리페인트는 요소의 시각적 스타일(예: 색상, 배경, 그림자 등)이 변경되었을 때, 브라우저가 해당 요소를 화면에 다시 그리는 과정입니다. 리페인트는 페인팅 단계에서 수행되며, 레이아웃(예: 크기나 위치) 변경 없이 스타일만 업데이트합니다.\"},{\"type\":\"stringlist\",\"value\":\"color, background-color, box-shadow, border-color, visibility 등.\\nopacity 변경 (단, GPU 가속이 적용되면 리페인트를 피할 수 있음).\"},{\"type\":\"Heading\",\"headingType\":\"h3\",\"value\":\"리페인트의 비용\"},{\"type\":\"stringlist\",\"value\":\"리페인트는 리플로우보다 계산 비용이 적습니다. 레이아웃을 재계산하지 않고 픽셀만 다시 그리기 때문입니다.\"},{\"type\":\"normal\",\"value\":\"그러나 페이지에 많은 요소가 있거나 복잡한 스타일(예: 그림자, 그라디언트)이 적용된 경우 리페인트도 성능에 영향을 줄 수 있습니다.\"},{\"type\":\"Heading\",\"headingType\":\"h2\",\"value\":\"리플로우와 리페인트의 관계\"},{\"type\":\"stringlist\",\"value\":\"\u003cb\u003e리플로우 → 리페인트\u003c/b\u003e: 리플로우는 레이아웃을 변경하므로, 레이아웃이 바뀐 요소는 다시 그려져야 하므로 리페인트가 발생합니다.\\n\u003cb\u003e리페인트만 발생\u003c/b\u003e: 레이아웃에 영향을 주지 않는 스타일 변경(예: color, background)은 리페인트만 유발합니다.\\n\u003cb\u003e컴포지팅\u003c/b\u003e: \u003cspan class=\\\"point\\\"\u003e현대 브라우저에서는 transform이나 opacity 같은 속성 변경은 레이아웃이나 페인팅 없이 컴포지팅 단계에서 처리됩니다. 이는 리플로우와 리페인트를 모두 피할 수 있어 성능이 뛰어납니다.\u003c/span\u003e \"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"리플로우와 리페인트의 예시\"},{\"type\":\"normal\",\"value\":\"다음은 React 컴포넌트에서 버튼 클릭 시 박스의 스타일을 변경하여 리플로우와 리페인트를 유발하는 예제입니다.\"},{\"type\":\"code\",\"value\":\"// src/App.jsx\\n\\t\\t\\t\\t\\nimport { useState } from 'react';\\n\\nfunction App() {\\n  const [boxStyle, setBoxStyle] = useState({\\n    width: '200px',\\n    height: '100px',\\n    margin: '20px',\\n    backgroundColor: 'lightblue',\\n  });\\n\\n  const changeStyle = () =\u003e {\\n    setBoxStyle({\\n      width: '300px', // 리플로우 유발 (레이아웃 변경)\\n      height: '150px', // 리플로우 유발\\n      margin: '30px', // 리플로우 유발\\n      backgroundColor: 'lightgreen', // 리페인트 유발\\n    });\\n  };\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003ch1\u003e리플로우와 리페인트 예제\u003c/h1\u003e\\n      \u003cdiv style={boxStyle}\u003e\\n        테스트 박스\\n      \u003c/div\u003e\\n      \u003cbutton onClick={changeStyle}\u003e스타일 변경\u003c/button\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\nexport default App;\"},{\"type\":\"stringlist\",\"value\":\"\u003cb\u003e리플로우 유발\u003c/b\u003e : width, height, margin 변경은 요소의 레이아웃을 수정하므로 리플로우가 발생합니다. 이는 박스 모델의 크기와 위치를 재계산합니다.\\n\u003cb\u003e리페인트 유발\u003c/b\u003e : backgroundColor 변경은 레이아웃에 영향을 주지 않으므로 리페인트만 발생합니다. 하지만 위에서 리플로우가 발생했으므로 리페인트는 포함됩니다.\\n\u003cb\u003e문제점\u003c/b\u003e \u003c/br\u003e - 여러 스타일 변경이 개별적으로 적용되면 React의 상태 업데이트로 인해 불필요한 리렌더링이 발생할 수 있습니다. \u003c/br\u003e - 레이아웃 변경은 성능 비용이 크므로 빈번한 변경 시 사용자 경험이 저하될 수 있습니다.\"},{\"type\":\"Heading\",\"value\":\"컴포지팅 활용 및 React 최적화\",\"headingType\":\"h2\"},{\"type\":\"normal\",\"value\":\"이 예제는 리플로우와 리페인트를 최소화하기 위해 \u003cb\u003etransform과 같은 컴포지팅 속성을 사용\u003c/b\u003e 하고, React의 렌더링 최적화 기법을 적용합니다.\"},{\"type\":\"code\",\"value\":\"// src/App.jsx\\n\\nimport { useState, useCallback } from 'react';\\nimport './App.css';\\n\\nfunction App() {\\n  const [isTransformed, setIsTransformed] = useState(false);\\n  const [isColorChanged, setIsColorChanged] = useState(false);\\n\\n  const toggleTransform = useCallback(() =\u003e {\\n    setIsTransformed((prev) =\u003e !prev);\\n  }, []);\\n\\n  const toggleColor = useCallback(() =\u003e {\\n    setIsColorChanged((prev) =\u003e !prev);\\n  }, []);\\n\\n  return (\\n    \u003cdiv\u003e\\n      \u003ch1\u003e최적화된 리플로우/리페인트 예제\u003c/h1\u003e\\n      \u003cdiv\\n        className={\\\"box ${isTransformed ? \\\"transformed\\\" : \\\"\\\"} ${\\n          isColorChanged ? \\\"color-changed\\\" : \\\"\\\"\\n        }\\\"}\\n      \u003e\\n        테스트 박스\\n      \u003c/div\u003e\\n      \u003cbutton onClick={toggleTransform}\u003e위치 이동 (Transform)\u003c/button\u003e\\n      \u003cbutton onClick={toggleColor}\u003e색상 변경\u003c/button\u003e\\n    \u003c/div\u003e\\n  );\\n}\\n\\nexport default App;\"},{\"type\":\"code\",\"value\":\"/* src/App.css */\\n.box {\\n  width: 200px;\\n  height: 100px;\\n  margin: 20px;\\n  background-color: lightblue;\\n  transition: transform 0.3s ease, background-color 0.3s ease;\\n}\\n\\n.transformed {\\n  transform: translateX(100px); /* 컴포지팅만 유발 */\\n}\\n\\n.color-changed {\\n  background-color: lightgreen; /* 리페인트만 유발 */\\n}\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"컴포지팅 활용\"},{\"type\":\"normal\",\"value\":\"transform: translateX(100px)는 레이아웃이나 픽셀을 다시 계산하지 않고 GPU를 활용해 컴포지팅 단계에서 처리됩니다. 이는 리플로우와 리페인트를 피합니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"리페인트만 유발\"},{\"type\":\"normal\",\"value\":\"background-color 변경은 리페인트만 유발하며, 레이아웃에 영향을 주지 않습니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"React 최적화\"},{\"type\":\"stringlist\",\"value\":\"\u003cb\u003e클래스 기반 스타일 변경\u003c/b\u003e: style 객체를 직접 변경하는 대신 CSS 클래스를 토글하여 리렌더링 비용을 줄입니다.\\n\u003cb\u003eCSS 애니메이션\u003c/b\u003e: transition 속성을 사용해 부드러운 애니메이션을 구현하며, 브라우저의 최적화(GPU 가속)를 활용합니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"브라우저 개발자 도구 활용\"},{\"type\":\"stringlist\",\"value\":\"Chrome DevTools의 Performance 탭에서 리플로우와 리페인트를 기록하여 어떤 속성이 성능 병목을 일으키는지 확인.\\nRendering 탭에서 \\\"Paint Flashing\\\"을 활성화하면 리페인트 영역을 시각적으로 확인 가능.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"Core Web Vitals 고려\"},{\"type\":\"normal\",\"value\":\"\u003cspan class=\\\"point\\\"\u003e리플로우\u003c/span\u003e는 \u003cb\u003eCLS(Cumulative Layout Shift)를 유발\u003c/b\u003e할 수 있으므로, 레이아웃 이동을 최소화.\\n\u003cspan class=\\\"point\\\"\u003e리페인트\u003c/span\u003e는 \u003cb\u003eLCP(Largest Contentful Paint)에 영향\u003c/b\u003e을 줄 수 있으므로, 중요한 콘텐츠의 렌더링을 최적화 하여 사용 하도록 합니다.\"},{\"type\":\"Heading\",\"headingType\":\"h4\",\"value\":\"라이브러리 사용\"},{\"type\":\"normal\",\"value\":\"React에서 애니메이션을 위해 framer-motion이나 react-spring 같은 라이브러리를 사용하면 컴포지팅을 자동으로 활용 가능합니다.\"}]},\"segment\":\"posts\"}],[\"$\",\"div\",null,{\"className\":\"footer_footer_container__MsSvO\",\"children\":[\"$\",\"footer\",null,{\"className\":\"footer_footer__AwYty\",\"children\":[[\"$\",\"p\",null,{\"className\":\"footer_copylight___J5l0\",\"children\":[\"© 2024 \",\"베짱이가 되고싶은 개미。\",\" Some rights reserved.\"]}],[\"$\",\"p\",null,{\"className\":\"footer_theme__bwXbg\",\"children\":\"portfolio v1.0.0-alpha.3\"}]]}]}]],null]]},[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(layoutCase)\",\"children\",\"tags\",\"children\",\"$c\",\"children\",\"$d\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/175d6c648827cdb6.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(layoutCase)\",\"children\",\"tags\",\"children\",\"$c\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(layoutCase)\",\"children\",\"tags\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]],\"search\":[\"__DEFAULT__\",{},[\"$f\",\"$L11\",null]]},[null,[\"$\",\"$L12\",null,{\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(layoutCase)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],\"search\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"search\",\"segmentPath\":[\"children\",\"(layoutCase)\",\"search\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$13\",\"styles\":null}],\"params\":{}}],null]]},[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\",\"as\":\"style\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR\u0026display=swap\",\"as\":\"style\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$14\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$15\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$16\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$17\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0c496b0e03d530ba.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]}]]}],null]],\"initialHead\":[false,\"$L18\"],\"globalErrorComponent\":\"$19\"}]]\n"])</script><script>self.__next_f.push([1,"11:E{\"digest\":\"NEXT_NOT_FOUND\"}\n"])</script><script>self.__next_f.push([1,"18:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"be come 💡\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"App for an Ant Who Wants to Become a Bejjangyi\"}]]\n6:null\n10:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>